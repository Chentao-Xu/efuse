# Fuse-BPF

## 堆栈式文件系统

堆栈式文件系统通过在现有文件系统之上堆叠额外的功能层，实现复杂功能而无需重写整个文件系统。

* 复用已有文件系统的功能，避免从零实现所有文件系统功能。
* 增强现有文件系统，比如添加加密、压缩、日志、版本控制等功能。
* 通过分层架构，模块化设计，实现功能解耦与组合。

用户进程发送请求 -> 堆栈式文件系统拦截请求，进行处理 -> 处理后传递给下层实际文件系统 -> 实际文件系统执行请求并返回，堆栈式文件系统再次处理结果 -> 结果返回给用户进程

## Fuse-BPF

将 FUSE 扩展成堆栈式文件系统。

FUSE 文件系统可以直接映射到底层文件系统，无用户态干预，几乎无开销。

通过 eBPF 对文件系统请求做预处理/后处理。

挂载时需要指一个**绑定文件系统** backing file system。